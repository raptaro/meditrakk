# health_tips_rule_engine.yaml
ruleset: "health_tips_generator"
version: "1.0"
description: "Generate health tips based on patient diagnoses"

health_tip_rules:
  diabetes:
    conditions:
      - "diagnosis.diagnosis_code in ['E11.9', 'E11', 'DM2', 'DIABETES']"
      - "'diabetes' in diagnosis.diagnosis_description.lower()"
      - "'diabetic' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Monitor your blood sugar daily."
      - "Limit intake of sugary foods and beverages."
      - "Exercise regularly to maintain insulin sensitivity."
      - "Take medications as prescribed by your doctor."
      - "Schedule regular check-ups with your endocrinologist."

  hypertension:
    conditions:
      - "diagnosis.diagnosis_code in ['I10', 'HTN', 'HYPERTENSION']"
      - "'hypertension' in diagnosis.diagnosis_description.lower()"
      - "'high blood pressure' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Reduce salt in your meals."
      - "Check your blood pressure regularly."
      - "Engage in light physical activity like walking."
      - "Limit alcohol consumption and avoid smoking."
      - "Manage stress through relaxation techniques."

  asthma:
    conditions:
      - "diagnosis.diagnosis_code in ['J45', 'ASTHMA', 'AST']"
      - "'asthma' in diagnosis.diagnosis_description.lower()"
      - "'reactive airway' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Avoid exposure to dust and smoke."
      - "Always carry your inhaler with you."
      - "Follow your prescribed breathing exercises."
      - "Identify and avoid your asthma triggers."
      - "Keep your living environment clean and dust-free."

  flu:
    conditions:
      - "diagnosis.diagnosis_code in ['J11', 'J10', 'FLU', 'INFLUENZA']"
      - "'flu' in diagnosis.diagnosis_description.lower()"
      - "'influenza' in diagnosis.diagnosis_description.lower()"
      - "'fever' in diagnosis.diagnosis_description.lower() and 'cough' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Rest and stay hydrated."
      - "Avoid contact with others to prevent spread."
      - "Take paracetamol for fever if needed."
      - "Use a humidifier to ease breathing."
      - "Wash hands frequently to avoid spreading germs."

  anemia:
    conditions:
      - "diagnosis.diagnosis_code in ['D64.9', 'ANEMIA', 'ANEM']"
      - "'anemia' in diagnosis.diagnosis_description.lower()"
      - "'low hemoglobin' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Include iron-rich foods like spinach and red meat in your diet."
      - "Avoid drinking tea or coffee with meals."
      - "Follow up with your doctor for iron supplementation."
      - "Eat foods rich in Vitamin C to improve iron absorption."
      - "Get adequate rest and avoid overexertion."

  fever:
    conditions:
      - "diagnosis.diagnosis_code in ['R50.9', 'FEVER', 'FVR', 'PYREXIA']"
      - "'fever' in diagnosis.diagnosis_description.lower()"
      - "'elevated temperature' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Drink plenty of fluids to stay hydrated."
      - "Rest in a cool, comfortable environment."
      - "Use damp cloths to cool the forehead and body."
      - "Take fever-reducing medication as directed."
      - "Monitor temperature every 4-6 hours."

  lung_cancer:
    conditions:
      - "diagnosis.diagnosis_code in ['C34', 'LUNGCA', 'LNG CNCR']"
      - "'lung cancer' in diagnosis.diagnosis_description.lower()"
      - "'pulmonary neoplasm' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Avoid all forms of tobacco and smoking."
      - "Attend all scheduled treatment appointments."
      - "Practice deep breathing exercises regularly."
      - "Maintain a nutritious diet to support your immune system."
      - "Report any new or worsening symptoms to your doctor immediately."

  heart_disease: 
    conditions:
      - "diagnosis.diagnosis_code in ['HRT DSS', 'I25.1', 'HEART DIS']"
      - "'heart disease' in diagnosis.diagnosis_description.lower()"
      - "'cardiac' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Follow a heart-healthy diet low in salt and saturated fats."
      - "Take prescribed medications regularly."
      - "Monitor blood pressure and cholesterol levels."
      - "Engage in regular physical activity as recommended by your doctor."

  liver_cancer:
    conditions:
      - "diagnosis.diagnosis_code in ['LVRCNCR', 'C22.9', 'LIVER CA', 'LIVERCNCR']"
      - "'liver cancer' in diagnosis.diagnosis_description.lower()"
      - "'hepatic cancer' in diagnosis.diagnosis_description.lower()"
      - "'hepatocellular' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Avoid alcohol completely to reduce liver strain."
      - "Follow a low-sodium diet to prevent fluid buildup."
      - "Monitor for jaundice (yellowing of skin or eyes) and report immediately."
      - "Attend all scheduled oncology and hepatology appointments."
      - "Maintain a balanced diet with adequate protein to support liver function."
      - "Report any abdominal pain, swelling, or changes in appetite to your doctor."
      - "Get plenty of rest and avoid overexertion."

  pancreatic_cancer:
    conditions:
      - "diagnosis.diagnosis_code in ['PNCCNCR', 'C25.9', 'PANCREAS CA', 'PANC CNCR']"
      - "'pancreatic cancer' in diagnosis.diagnosis_description.lower()"
      - "'pancreas cancer' in diagnosis.diagnosis_description.lower()"
    tips:
      - "Eat small, frequent meals to manage digestion and maintain nutrition."
      - "Monitor blood sugar levels regularly as pancreatic issues can affect insulin."
      - "Report any new or worsening abdominal pain, nausea, or weight loss."
      - "Stay hydrated and consider pancreatic enzyme supplements if recommended."
      - "Attend all scheduled oncology and gastroenterology appointments."
      - "Manage pain with medications as prescribed by your doctor."
      - "Seek nutritional counseling to maintain adequate calorie intake."
rule_engine_config:
  execution_mode: "per_diagnosis"
  max_tips_per_diagnosis: 3
  default_doctor_id: "system-auto"
  tip_source: "AI Health Assistant"

output_template:
  model: "HealthTips"
  fields:
    patient: "{{diagnosis.patient}}"
    diagnosis: "{{diagnosis.id}}"
    doctor: "{{config.default_doctor_id}}"
    tip_text: "{{selected_tip}}"
    source: "{{config.tip_source}}"
    is_for_patient: true