### Register a new user
POST http://localhost:8000/user/users/ 
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzY2NjM0MDYxLCJpYXQiOjE3NTg4NTgwNjEsImp0aSI6ImZjOTJkYjUxMDAwNDRhYmE4ZjQ5Zjk4Zjk3MWVhOGRiIiwidXNlcl9pZCI6IjUiLCJpc19zdGFmZiI6dHJ1ZSwiaXNfc3VwZXJ1c2VyIjp0cnVlLCJlbWFpbCI6ImFkbWluQGdtYWlsLmNvbSIsInJvbGUiOiJhZG1pbiIsImZpcnN0X25hbWUiOiJBZG1pbiJ9.AbstOsDvLYhdjOMJv1156D3eCM3n9F7kNqnKc_wP5kw

{
  "email": "secretaryaccount@gmail.com",
  "first_name": "Penny",
  "last_name": "Lane",
  "password": "nVmTfEkCFeB3APi",
  "re_password": "nVmTfEkCFeB3APi",
  "role": "secretary"
}
### admin request
GET http://127.0.0.1:8000//api/patients/${patientId}
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzUwNDA4NzQyLCJpYXQiOjE3NDI2MzI3NDIsImp0aSI6IjY5Yjk3YWI3NDY2MjQ1MjJhYzNhZGM4NWFkOGIyMzI0IiwidXNlcl9pZCI6IjUiLCJpc19zdGFmZiI6dHJ1ZSwiaXNfc3VwZXJ1c2VyIjp0cnVlLCJlbWFpbCI6ImFkbWluQGdtYWlsLmNvbSIsInJvbGUiOiJhZG1pbiIsImZpcnN0X25hbWUiOiJBZG1pbiJ9.rx2coVwqmYNtT7indqtvkr4bp3qiwJ0WQSau7Zj9b4s



### admin request
GET  http://127.0.0.1:8000/user/doctors/ 
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzUwNDA4NzQyLCJpYXQiOjE3NDI2MzI3NDIsImp0aSI6IjY5Yjk3YWI3NDY2MjQ1MjJhYzNhZGM4NWFkOGIyMzI0IiwidXNlcl9pZCI6IjUiLCJpc19zdGFmZiI6dHJ1ZSwiaXNfc3VwZXJ1c2VyIjp0cnVlLCJlbWFpbCI6ImFkbWluQGdtYWlsLmNvbSIsInJvbGUiOiJhZG1pbiIsImZpcnN0X25hbWUiOiJBZG1pbiJ9.rx2coVwqmYNtT7indqtvkr4bp3qiwJ0WQSau7Zj9b4s

### Login to obtain JWT tokens
POST http://localhost:8000/auth/jwt/create/
Content-Type: application/json

{
  "email": "secretaryaccount@gmail.com",
  "password": "nVmTfEkCFeB3APi"
}
###

### Login Secretary
POST http://localhost:8000/auth/jwt/create/
Content-Type: application/json

{
  "email": "cardiologist@hospital.com",
  "password": "securepassword123"
}

### Login Doctor
POST  http://localhost:8000/auth/jwt/create/
Content-Type: application/json

{
  "email": "stinson@gmail.com",
  "password": "stinson-020001019861206"
}

### doctor
GET   http://localhost:8000/user/users/?role=patient
Content-Type: application/json  
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzcwNTI4NTQyLCJpYXQiOjE3NjI3NTI1NDIsImp0aSI6ImM4YTlmMTVmMTVhODQyYWZhZjlkNDJhOThkYzU1Nzg3IiwidXNlcl9pZCI6ImNvb3Blci0wMjAwMDYiLCJpc19zdGFmZiI6ZmFsc2UsImlzX3N1cGVydXNlciI6ZmFsc2UsImVtYWlsIjoiZ2VuZXJhbGRvY3RvckBob3NwaXRhbC5jb20iLCJyb2xlIjoiZG9jdG9yIiwiZmlyc3RfbmFtZSI6IlNoZWxkb24ifQ.m28y3MCaldjpuLBTVgjmD5MF4xPVWJq4C5KT29-ItT8
### secretary request
GET    http://localhost:8000/medicine/predict/
Content-Type: application/json  
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzcxMDkxMTU0LCJpYXQiOjE3NjMzMTUxNTQsImp0aSI6IjJiZGZjZTljYjMyZDRmOTliZjU1ZmU3MWY0OTQ4NTRhIiwidXNlcl9pZCI6ImxhbmUtMDIwMDA4IiwiaXNfc3RhZmYiOmZhbHNlLCJpc19zdXBlcnVzZXIiOmZhbHNlLCJlbWFpbCI6InNlY3JldGFyeWFjY291bnRAZ21haWwuY29tIiwicm9sZSI6InNlY3JldGFyeSIsImZpcnN0X25hbWUiOiJQZW5ueSJ9.7bdjo8SLivFgUevk3zPqYMw7XVukEKAqCLTrljmNltU
tinson-0200010
### oncalldoctor request
GET http://localhost:8000/patient/patient-info/stinson-02000
Content-Type: application/json  
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzY5ODczNzIwLCJpYXQiOjE3NjIwOTc3MjAsImp0aSI6IjNjZGUxOGFlYWY4ODQ1NjQ5ZDM2MThhNmEzNWFlZDg5IiwidXNlcl9pZCI6ImhvZnN0YWR0ZXItMDIwMDA3IiwiaXNfc3RhZmYiOmZhbHNlLCJpc19zdXBlcnVzZXIiOmZhbHNlLCJlbWFpbCI6ImNhcmRpb2xvZ2lzdEBob3NwaXRhbC5jb20iLCJyb2xlIjoib24tY2FsbC1kb2N0b3IiLCJmaXJzdF9uYW1lIjoiTGVvbmFyZCJ9.Ck70MesoN12NxM9heHFIaT2s30fX--H5wVoHlMDGiHY

### patient

GET    http://localhost:8000/user/users/?role=doctor
Content-Type: application/json  
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzcwNzI5NzA2LCJpYXQiOjE3NjI5NTM3MDYsImp0aSI6IjNiMjU4MjFkNjdlNTQ4YjdiYTUxMWI1YzEzYTdiNzkwIiwidXNlcl9pZCI6InN0aW5zb24tMDIwMDAxMCIsImlzX3N0YWZmIjpmYWxzZSwiaXNfc3VwZXJ1c2VyIjpmYWxzZSwiZW1haWwiOiJzdGluc29uQGdtYWlsLmNvbSIsInJvbGUiOiJwYXRpZW50IiwiZmlyc3RfbmFtZSI6IkJhcm5leSJ9.ri1OtSzDb44qQVlDdY3izhH0MrR6hb0NzwcJdSMin80
 
# {
#   "doctor_id": 20,
#   "appointment_date": "2025-10-25T10:00:00+08:00",
#   "notes": "Follow-up",
#   "payment_method": "PayMaya"
# }

### Admin
GET    http://localhost:8000/send-test-email/
Content-Type: application/json  
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzY2NjM0MDYxLCJpYXQiOjE3NTg4NTgwNjEsImp0aSI6ImZjOTJkYjUxMDAwNDRhYmE4ZjQ5Zjk4Zjk3MWVhOGRiIiwidXNlcl9pZCI6IjUiLCJpc19zdGFmZiI6dHJ1ZSwiaXNfc3VwZXJ1c2VyIjp0cnVlLCJlbWFpbCI6ImFkbWluQGdtYWlsLmNvbSIsInJvbGUiOiJhZG1pbiIsImZpcnN0X25hbWUiOiJBZG1pbiJ9.AbstOsDvLYhdjOMJv1156D3eCM3n9F7kNqnKc_wP5kw


### Base URL
### Base URL
@baseUrl =  http://localhost:8000

### 1. Check NEW Payment Status (Should be 'Pending')
GET {{baseUrl}}/payments/test-webhook/44/
Content-Type: application/json

### 2. Test Simple Webhook - Mark as Paid
POST {{baseUrl}}/payments/test-webhook/44/
Content-Type: application/json

### 3. Verify Payment Updated to 'Paid'
GET {{baseUrl}}/payments/test-webhook/44/
Content-Type: application/json

### 4. Test Real Webhook with the NEW Reference ID
POST {{baseUrl}}/payments/webhook/
Content-Type: application/json

{
  "type": "CHECKOUT_SUCCESS",
  "id": "a3dadeb1-ecce-4f67-ad2d-4b1c8e85c07b",  
  "status": "PAYMENT_SUCCESS",
  "paymentStatus": "PAYMENT_SUCCESS",
  "requestReferenceNumber": "44",
  "totalAmount": {
    "value": "500.00",
    "currency": "PHP"
  },
  "createdAt": "2024-01-01T00:00:00Z",
  "updatedAt": "2024-01-01T00:00:00Z"
}

### Test Complete Automatic Flow

### 1. Book Appointment (Creates Pending Payment)
POST {{baseUrl}}/appointments/book/
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzY5NjIyOTk0LCJpYXQiOjE3NjE4NDY5OTQsImp0aSI6IjY2MDA1YjA1MTJkZDRkNTliYTAwYzE5NTM3MGNhNTE1IiwidXNlcl9pZCI6Inp1bWEtMDIwMDA5IiwiaXNfc3RhZmYiOmZhbHNlLCJpc19zdXBlcnVzZXIiOmZhbHNlLCJlbWFpbCI6Inp1bWFAZ21haWwuY29tIiwicm9sZSI6InBhdGllbnQiLCJmaXJzdF9uYW1lIjoiRGVtYmUifQ.DHOi5Kjx6zIFbsSWak5bGGeQNbOqOCRDBKHCzDxt5w8

{
  "doctor_id": "wolowitz-0200010",
  "appointment_date": "2025-11-11T10:00:00Z",
  "payment_method": "PayMaya",
  "notes": "Test automatic payment flow"
}

### 2. Note the payment_id from response, then check status (should be Pending)
GET {{baseUrl}}/payments/test-webhook/40/

### 3. Simulate PayMaya Webhook (This happens automatically in production)
POST {{baseUrl}}/payments/webhook/
Content-Type: application/json

{
  "type": "CHECKOUT_SUCCESS",
  "id": "b255e160-8d49-4ed2-9b70-b867220f95d0",
  "status": "PAYMENT_SUCCESS",
  "paymentStatus": "PAYMENT_SUCCESS",
  "requestReferenceNumber": "35",
  "totalAmount": {"value": "500.00", "currency": "PHP"},
  "createdAt": "2025-01-01T00:00:00Z",
  "updatedAt": "2025-01-01T00:00:00Z"
}

### 4. Check status again (should now be Paid - AUTOMATIC UPDATE)
GET {{baseUrl}}/payments/test-webhook/NEW_PAYMENT_ID_HERE/